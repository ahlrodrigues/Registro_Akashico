<div id="modalCadastroUsuario" class="modal hidden">
  <div class="modal-box">
    
    <h2>Editar Cadastro</h2>

    <form id="formEditarUsuario">
      <div class="form-group">
        <label for="nome">Nome completo</label>
        <input type="text" id="nome" name="nome" required />
      </div>

      <div class="form-group">
        <label for="apelido">Nome social / Apelido</label>
        <input type="text" id="apelido" name="apelido" />
      </div>

      <div class="form-group">
        <label for="grau">Grau</label>
        <select id="grau" name="grau" required>
          <option value="assistido">Assistido</option>
          <option value="servidor">Servidor</option>
          <option value="discipulo">Discípulo</option>
        </select>
      </div>

      <div class="form-group">
        <label for="telefone">Telefone</label>
        <input type="tel" id="telefone" name="telefone" />
      </div>

      <div class="form-group">
        <label for="email">E-mail</label>
        <input type="email" id="email" name="email" />
      </div>

      <div class="form-group">
        <label for="status">Status</label>
        <select id="status" name="status" required>
          <option value="ativo">Ativo</option>
          <option value="inativo">Inativo</option>
        </select>
      </div>
      <div id="calendario-container">
        <div class="calendario-header">
          <button id="mes-anterior" class="btn-nav">&#9664;</button>
          <span id="mes-ano-atual">Julho 2025</span>
          <button id="mes-seguinte" class="btn-nav">&#9654;</button>
        </div>
      
        <table class="calendario-tabela">
          <thead>
            <tr>
              <th>Dom</th>
              <th>Seg</th>
              <th>Ter</th>
              <th>Qua</th>
              <th>Qui</th>
              <th>Sex</th>
              <th>Sáb</th>
            </tr>
          </thead>
          <tbody id="corpo-calendario">
            <!-- Linhas geradas dinamicamente pelo JS -->
          </tbody>
        </table>
      
        <p class="calendario-legenda">
          * Clique para marcar/desmarcar presença<br>
          * Passe o mouse para ver o horário
        </p>
      </div>
      

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Salvar</button>
        <button type="button" id="btnExcluir" class="btn btn-danger hidden">Excluir</button>
      </div>
    </form>
  </div>
</div>

<script type="module">
  import { renderizarCalendario } from './js/calendarioPresencas.js';

  // Quando o modal for aberto com os dados preenchidos
  window.abrirModalEditarUsuario = async (dados) => {
    // Preenche o formulário
    document.getElementById("nome").value = dados.nome || "";
    document.getElementById("apelido").value = dados.apelido || "";
    document.getElementById("grau").value = dados.grau || "";
    document.getElementById("telefone").value = dados.telefone || "";
    document.getElementById("email").value = dados.email || "";
    document.getElementById("status").value = dados.status || "";

    // Exibe o modal
    document.getElementById("modalCadastroUsuario").classList.remove("hidden");

    // Carrega o calendário com o ID do assistido
    if (dados.id) {
      await renderizarCalendario(dados.id);
    }
  };
</script>

